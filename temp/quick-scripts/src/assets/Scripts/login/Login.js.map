{"version":3,"sources":["assets/Scripts/login/Login.js"],"names":["cc","Class","Component","properties","userName","type","EditBox","password","rememberMe","Toggle","lobbyNode","Node","onLoad","isChecked","onLoginClick","address","K","ServerAddress","ipAddress","ServerAPI","login","data","username","string","ServerCom","httpRequest","response","token","randomNumber","Math","floor","random","sys","isBrowser","document","cookie","localStorage","setItem","setTimeout","active","bind"],"mappings":";;;;;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AAERC,IAAAA,QAAQ,EAAE;AACN,iBAAS,IADH;AAENC,MAAAA,IAAI,EAAEL,EAAE,CAACM;AAFH,KAFF;AAMRC,IAAAA,QAAQ,EAAE;AACN,iBAAS,IADH;AAENF,MAAAA,IAAI,EAAEL,EAAE,CAACM;AAFH,KANF;AAURE,IAAAA,UAAU,EAAE;AACR,iBAAS,IADD;AAERH,MAAAA,IAAI,EAAEL,EAAE,CAACS;AAFD,KAVJ;AAcRC,IAAAA,SAAS,EAAC;AACN,iBAAS,IADH;AAENL,MAAAA,IAAI,EAAEL,EAAE,CAACW;AAFH;AAdF,GAHP;AAuBL;AACAC,EAAAA,MAxBK,oBAwBK;AACN,QAAG,KAAKJ,UAAR,EAAmB;AACf,WAAKA,UAAL,CAAgBK,SAAhB,GAA4B,KAA5B;AACH;AACJ,GA5BI;AA8BLC,EAAAA,YA9BK,0BA8BU;AACX,QAAIC,OAAO,GAAGC,CAAC,CAACC,aAAF,CAAgBC,SAAhB,GAA4BF,CAAC,CAACG,SAAF,CAAYC,KAAtD;AACA,QAAIC,IAAI,GAAG;AACPC,MAAAA,QAAQ,EAAE,KAAKlB,QAAL,CAAcmB,MADjB;AAEPhB,MAAAA,QAAQ,EAAE,KAAKA,QAAL,CAAcgB;AAFjB,KAAX;AAIAC,IAAAA,SAAS,CAACC,WAAV,CAAsB,MAAtB,EAA8BV,OAA9B,EAAuCM,IAAvC,EAA6C,UAAUK,QAAV,EAAoB;AAC7D,UAAIA,QAAQ,CAACC,KAAb,EAAoB;AAChB,YAAMC,YAAY,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,EAA3B,IAAiC,CAAtD;;AACA,YAAI/B,EAAE,CAACgC,GAAH,CAAOC,SAAX,EAAsB;AAClBC,UAAAA,QAAQ,CAACC,MAAT,kBAA+BT,QAAQ,CAACC,KAAxC;AACAO,UAAAA,QAAQ,CAACC,MAAT,gBAA6BP,YAA7B;AACH,SAHD,MAGO;AACH5B,UAAAA,EAAE,CAACgC,GAAH,CAAOI,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,EAAyCX,QAAQ,CAACC,KAAlD;AACA3B,UAAAA,EAAE,CAACgC,GAAH,CAAOI,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,EAAqCT,YAArC;AACH,SARe,CAShB;;;AACAU,QAAAA,UAAU,CAAC,YAAY;AACnB,eAAK5B,SAAL,CAAe6B,MAAf,GAAwB,IAAxB;AACH,SAFU,CAETC,IAFS,CAEJ,IAFI,CAAD,EAEI,IAFJ,CAAV;AAGH;AAEJ,KAhB4C,CAgB3CA,IAhB2C,CAgBtC,IAhBsC,CAA7C;AAkBH;AAtDI,CAAT","sourceRoot":"/","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        userName: {\n            default: null,\n            type: cc.EditBox,\n        },\n        password: {\n            default: null,\n            type: cc.EditBox,\n        },\n        rememberMe: {\n            default: null,\n            type: cc.Toggle\n        },\n        lobbyNode:{\n            default: null,\n            type: cc.Node,\n        }\n    \n    },\n    // LIFE-CYCLE CALLBACKS:\n    onLoad () {\n        if(this.rememberMe){\n            this.rememberMe.isChecked = false;\n        }\n    },\n\n    onLoginClick (){\n        var address = K.ServerAddress.ipAddress + K.ServerAPI.login;\n        var data = {\n            username: this.userName.string,\n            password: this.password.string\n        };\n        ServerCom.httpRequest(\"POST\", address, data, function (response) {\n            if (response.token) {\n                const randomNumber = Math.floor(Math.random() * 10) + 1;\n                if (cc.sys.isBrowser) {\n                    document.cookie = `userToken=${response.token}; path=/;`;\n                    document.cookie = `index = ${randomNumber}`\n                } else {\n                    cc.sys.localStorage.setItem('userToken', response.token);\n                    cc.sys.localStorage.setItem(\"index\", randomNumber); \n                }\n                // Cookies.set(\"index\", randomNumber);\n                setTimeout(function () {\n                    this.lobbyNode.active = true;\n                }.bind(this), 1000);\n            }\n            \n        }.bind(this));\n\n    },\n});"]}