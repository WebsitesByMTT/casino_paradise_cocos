
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Scripts/login/Login.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'ac1ac5oJ6VEUL3rD+Zja0yl', 'Login');
// Scripts/login/Login.js

"use strict";

// var responseTypes = require('ResponseTypes');
cc.Class({
  "extends": cc.Component,
  properties: {
    userName: {
      "default": null,
      type: cc.EditBox
    },
    password: {
      "default": null,
      type: cc.EditBox
    },
    rememberMe: {
      "default": null,
      type: cc.Toggle
    },
    lobbyNode: {
      "default": null,
      type: cc.Node
    },
    errorLable: {
      "default": null,
      type: cc.Label
    },
    loginErrorNode: {
      "default": null,
      type: cc.Node
    },
    customKeyboard: {
      "default": null,
      type: cc.Node
    },
    smallAlphabet: {
      "default": null,
      type: cc.Node
    },
    capitalAlphabet: {
      "default": null,
      type: cc.Node
    },
    symbolsAlphabet: {
      "default": null,
      type: cc.Node
    },
    capsButton: {
      "default": null,
      type: cc.Node
    },
    smallButton: {
      "default": null,
      type: cc.Node
    },
    deleteButton: {
      "default": null,
      type: cc.Node
    },
    spaceButton: {
      "default": null,
      type: cc.Node
    },
    commaButton: {
      "default": null,
      type: cc.Node
    },
    dotButton: {
      "default": null,
      type: cc.Node
    }
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {
    // if(this.rememberMe){
    //     this.rememberMe.isChecked = false;
    // }   
    this.activeInputField = null;
    this.setupInputFocusListeners();
    this.setupKeyboardButtonListeners();
    this.disableDefaultKeyboard();
    this.loadSavedLoginInfo();

    if (cc.sys.isMobile && cc.sys.isBrowser) {
      console.log = function () {};
    }
  },
  disableDefaultKeyboard: function disableDefaultKeyboard() {
    if (cc.sys.isMobile && cc.sys.isBrowser) {
      var inputs = document.querySelectorAll('input, textarea');
      inputs.forEach(function (input) {
        input.style.pointerEvents = 'none'; // Disable interactions
      });
    }
  },
  setupInputFocusListeners: function setupInputFocusListeners() {
    if (cc.sys.isMobile && cc.sys.isBrowser) {
      // Attach focus event listeners to username and password input fields
      if (this.userName) {
        this.userName.node.on(cc.Node.EventType.TOUCH_END, this.onInputFieldClicked, this);
      }

      if (this.password) {
        this.password.node.on(cc.Node.EventType.TOUCH_END, this.onInputFieldClicked, this);
      }
    }
  },
  onInputFieldClicked: function onInputFieldClicked(event) {
    var _this = this;

    // Focus the corresponding input field to trigger the keyboard
    // console.log(event);
    var inputNode = event.currentTarget.getComponent(cc.EditBox);

    if (inputNode) {
      // inputNode.focus()
      this.activeInputField = inputNode;

      if (this.customKeyboard) {
        this.customKeyboard.active = true; // Show the custom keyboard if needed

        event.preventDefault();
        this.scheduleOnce(function () {
          _this.activeInputField.blur(); // Blur the input field after showing the custom keyboard

        }, 0.1);
      }
    }
  },
  setupKeyboardButtonListeners: function setupKeyboardButtonListeners() {
    var _this2 = this;

    var allKeyboardButtons = this.getAllKeyboardButtons();
    allKeyboardButtons.forEach(function (button) {
      button.on(cc.Node.EventType.TOUCH_END, _this2.onKeyboardButtonClicked, _this2);
    });

    if (this.deleteButton) {
      // Add listener for the delete button
      this.deleteButton.on(cc.Node.EventType.TOUCH_END, this.onDeleteButtonClicked, this);
    }
  },
  getAllKeyboardButtons: function getAllKeyboardButtons() {
    var buttons = [];
    buttons = buttons.concat(this.smallAlphabet.children);
    buttons = buttons.concat(this.capitalAlphabet.children);
    buttons = buttons.concat(this.symbolsAlphabet.children);
    buttons = buttons.concat(this.spaceButton);
    buttons = buttons.concat(this.commaButton);
    buttons = buttons.concat(this.dotButton);
    return buttons;
  },
  onKeyboardButtonClicked: function onKeyboardButtonClicked(event) {
    var button = event.target;
    var customEventValue = button._components[1].clickEvents[0].customEventData;
    this.appendToActiveInput(customEventValue);
  },
  appendToActiveInput: function appendToActiveInput(value) {
    if (this.activeInputField) {
      this.activeInputField.string += value; // Append value to the active input field
    }
  },
  onDeleteButtonClicked: function onDeleteButtonClicked() {
    this.removeFromActiveInput();
  },
  //logoutButton Clicked
  logutClick: function logutClick() {
    if (this.lobbyNode.active) {
      this.lobbyNode.active = false;
    }

    var rememberMeChecked;

    if (cc.sys.isBrowser) {
      rememberMeChecked = localStorage.getItem('rememberMeChecked');
    } else {
      rememberMeChecked = cc.sys.localStorage.getItem('rememberMeChecked');
    }

    if (!rememberMeChecked) {
      this.clearSavedLoginInfo();
    }
  },
  removeFromActiveInput: function removeFromActiveInput() {
    if (this.activeInputField && this.activeInputField.string.length > 0) {
      this.activeInputField.string = this.activeInputField.string.slice(0, -1); // Remove last character
    }
  },
  onLoginClick: function onLoginClick() {
    var _this3 = this;

    var address = K.ServerAddress.ipAddress + K.ServerAPI.login;
    var data = {
      username: this.userName.string,
      password: this.password.string
    };

    if (this.userName.string == "" || this.password.string == "") {
      this.errorLable.string = "Username or Password fields are empty";
      this.loginErrorNode.active = true;
      setTimeout(function () {
        _this3.loginErrorNode.active = false;
      }, 2000);
      return;
    }

    if (this.rememberMe.isChecked) {
      this.saveLoginInfo(this.userName.string, this.password.string);
    } else {
      this.clearSavedLoginInfo();
    }

    ServerCom.httpRequest("POST", address, data, function (response) {
      // console.error("reponse on login", response.token);
      if (response.token) {
        var randomNumber = Math.floor(Math.random() * 10) + 1;

        if (cc.sys.isBrowser) {
          document.cookie = "userToken=" + response.token + "; path=/;";
          document.cookie = "index = " + randomNumber;
        } else {
          cc.sys.localStorage.setItem('userToken', response.token);
          cc.sys.localStorage.setItem("index", randomNumber);
        } // Cookies.set("index", randomNumber);


        setTimeout(function () {
          this.lobbyNode.active = true;
        }.bind(this), 1000);
      } else {}
    }.bind(this));
  },
  smallAlphabetBUttonClicked: function smallAlphabetBUttonClicked() {
    if (this.capitalAlphabet.active) {
      this.capitalAlphabet.active = false;
      this.smallAlphabet.active = true;

      if (this.symbolsAlphabet.active) {
        this.symbolsAlphabet.active = false;
      }

      this.smallButton.active = false;
      this.capsButton.active = true;
    } else {
      if (this.symbolsAlphabet.active) {
        this.symbolsAlphabet.active = false;
      }

      this.capitalAlphabet.active = true;
      this.smallAlphabet.active = false;
      this.smallButton.active = true;
      this.capsButton.active = false;
    }
  },
  specialSymbolClicked: function specialSymbolClicked() {
    if (this.capitalAlphabet.active || this.smallAlphabet.active) {
      this.smallAlphabet.active = false;
      this.capitalAlphabet.active = false;
      this.symbolsAlphabet.active = true;
    } else {
      this.symbolsAlphabet.active = false;

      if (!this.smallAlphabet.active) {
        this.smallAlphabet.active = true;
        this.capitalAlphabet.active = false;
      }
    }
  },
  closeKeyBoard: function closeKeyBoard() {
    this.customKeyboard.active = false;
  },
  saveLoginInfo: function saveLoginInfo(username, password) {
    if (cc.sys.isBrowser) {
      localStorage.setItem('rememberedUsername', username);
      localStorage.setItem('rememberedPassword', password);
      localStorage.setItem('rememberMeChecked', 'true');
    } else {
      cc.sys.localStorage.setItem('rememberedUsername', username);
      cc.sys.localStorage.setItem('rememberedPassword', password);
      cc.sys.localStorage.setItem('rememberMeChecked', 'true');
    }
  },
  clearSavedLoginInfo: function clearSavedLoginInfo() {
    if (cc.sys.isBrowser) {
      localStorage.removeItem('rememberedUsername');
      localStorage.removeItem('rememberedPassword');
      localStorage.removeItem('rememberMeChecked');
    } else {
      cc.sys.localStorage.removeItem('rememberedUsername');
      cc.sys.localStorage.removeItem('rememberedPassword');
      cc.sys.localStorage.removeItem('rememberMeChecked');
    }
  },
  loadSavedLoginInfo: function loadSavedLoginInfo() {
    var username, password, rememberMeChecked;

    if (cc.sys.isBrowser) {
      username = localStorage.getItem('rememberedUsername');
      password = localStorage.getItem('rememberedPassword');
      rememberMeChecked = localStorage.getItem('rememberMeChecked');
    } else {
      username = cc.sys.localStorage.getItem('rememberedUsername');
      password = cc.sys.localStorage.getItem('rememberedPassword');
      rememberMeChecked = cc.sys.localStorage.getItem('rememberMeChecked');
    }

    if (username && password) {
      this.userName.string = username;
      this.password.string = password;
    }

    if (rememberMeChecked === 'true') {
      this.rememberMe.isChecked = true; // this.rememberMe.getChildByName("checkmark").active = true
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHRzL2xvZ2luL0xvZ2luLmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwidXNlck5hbWUiLCJ0eXBlIiwiRWRpdEJveCIsInBhc3N3b3JkIiwicmVtZW1iZXJNZSIsIlRvZ2dsZSIsImxvYmJ5Tm9kZSIsIk5vZGUiLCJlcnJvckxhYmxlIiwiTGFiZWwiLCJsb2dpbkVycm9yTm9kZSIsImN1c3RvbUtleWJvYXJkIiwic21hbGxBbHBoYWJldCIsImNhcGl0YWxBbHBoYWJldCIsInN5bWJvbHNBbHBoYWJldCIsImNhcHNCdXR0b24iLCJzbWFsbEJ1dHRvbiIsImRlbGV0ZUJ1dHRvbiIsInNwYWNlQnV0dG9uIiwiY29tbWFCdXR0b24iLCJkb3RCdXR0b24iLCJvbkxvYWQiLCJhY3RpdmVJbnB1dEZpZWxkIiwic2V0dXBJbnB1dEZvY3VzTGlzdGVuZXJzIiwic2V0dXBLZXlib2FyZEJ1dHRvbkxpc3RlbmVycyIsImRpc2FibGVEZWZhdWx0S2V5Ym9hcmQiLCJsb2FkU2F2ZWRMb2dpbkluZm8iLCJzeXMiLCJpc01vYmlsZSIsImlzQnJvd3NlciIsImNvbnNvbGUiLCJsb2ciLCJpbnB1dHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaW5wdXQiLCJzdHlsZSIsInBvaW50ZXJFdmVudHMiLCJub2RlIiwib24iLCJFdmVudFR5cGUiLCJUT1VDSF9FTkQiLCJvbklucHV0RmllbGRDbGlja2VkIiwiZXZlbnQiLCJpbnB1dE5vZGUiLCJjdXJyZW50VGFyZ2V0IiwiZ2V0Q29tcG9uZW50IiwiYWN0aXZlIiwicHJldmVudERlZmF1bHQiLCJzY2hlZHVsZU9uY2UiLCJibHVyIiwiYWxsS2V5Ym9hcmRCdXR0b25zIiwiZ2V0QWxsS2V5Ym9hcmRCdXR0b25zIiwiYnV0dG9uIiwib25LZXlib2FyZEJ1dHRvbkNsaWNrZWQiLCJvbkRlbGV0ZUJ1dHRvbkNsaWNrZWQiLCJidXR0b25zIiwiY29uY2F0IiwiY2hpbGRyZW4iLCJ0YXJnZXQiLCJjdXN0b21FdmVudFZhbHVlIiwiX2NvbXBvbmVudHMiLCJjbGlja0V2ZW50cyIsImN1c3RvbUV2ZW50RGF0YSIsImFwcGVuZFRvQWN0aXZlSW5wdXQiLCJ2YWx1ZSIsInN0cmluZyIsInJlbW92ZUZyb21BY3RpdmVJbnB1dCIsImxvZ3V0Q2xpY2siLCJyZW1lbWJlck1lQ2hlY2tlZCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJjbGVhclNhdmVkTG9naW5JbmZvIiwibGVuZ3RoIiwic2xpY2UiLCJvbkxvZ2luQ2xpY2siLCJhZGRyZXNzIiwiSyIsIlNlcnZlckFkZHJlc3MiLCJpcEFkZHJlc3MiLCJTZXJ2ZXJBUEkiLCJsb2dpbiIsImRhdGEiLCJ1c2VybmFtZSIsInNldFRpbWVvdXQiLCJpc0NoZWNrZWQiLCJzYXZlTG9naW5JbmZvIiwiU2VydmVyQ29tIiwiaHR0cFJlcXVlc3QiLCJyZXNwb25zZSIsInRva2VuIiwicmFuZG9tTnVtYmVyIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY29va2llIiwic2V0SXRlbSIsImJpbmQiLCJzbWFsbEFscGhhYmV0QlV0dG9uQ2xpY2tlZCIsInNwZWNpYWxTeW1ib2xDbGlja2VkIiwiY2xvc2VLZXlCb2FyZCIsInJlbW92ZUl0ZW0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBRVJDLElBQUFBLFFBQVEsRUFBRTtBQUNOLGlCQUFTLElBREg7QUFFTkMsTUFBQUEsSUFBSSxFQUFFTCxFQUFFLENBQUNNO0FBRkgsS0FGRjtBQU1SQyxJQUFBQSxRQUFRLEVBQUU7QUFDTixpQkFBUyxJQURIO0FBRU5GLE1BQUFBLElBQUksRUFBRUwsRUFBRSxDQUFDTTtBQUZILEtBTkY7QUFVUkUsSUFBQUEsVUFBVSxFQUFFO0FBQ1IsaUJBQVMsSUFERDtBQUVS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RSxVQUFMLENBQWdCa0YsU0FBaEIsR0FBNEIsSUFBNUIsQ0FEOEIsQ0FFOUI7QUFDSDtBQUNKO0FBdlRJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHZhciByZXNwb25zZVR5cGVzID0gcmVxdWlyZSgnUmVzcG9uc2VUeXBlcycpO1xuY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcblxuICAgICAgICB1c2VyTmFtZToge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkVkaXRCb3gsXG4gICAgICAgIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuRWRpdEJveCxcbiAgICAgICAgfSxcbiAgICAgICAgcmVtZW1iZXJNZToge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLlRvZ2dsZVxuICAgICAgICB9LFxuICAgICAgICBsb2JieU5vZGU6e1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGUsXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yTGFibGU6e1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6Y2MuTGFiZWxcbiAgICAgICAgfSxcbiAgICAgICAgbG9naW5FcnJvck5vZGU6e1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgY3VzdG9tS2V5Ym9hcmQ6e1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGUsXG4gICAgICAgIH0sXG4gICAgICAgIHNtYWxsQWxwaGFiZXQ6e1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgY2FwaXRhbEFscGhhYmV0OntcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG4gICAgICAgIHN5bWJvbHNBbHBoYWJldDoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6Y2MuTm9kZVxuICAgICAgICB9LFxuICAgICAgICBjYXBzQnV0dG9uOntcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG4gICAgICAgIHNtYWxsQnV0dG9uOntcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG4gICAgICAgIGRlbGV0ZUJ1dHRvbjoge1xuICAgICAgICAgICAgZGVmYXVsdDpudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuICAgICAgICBzcGFjZUJ1dHRvbjp7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuICAgICAgICBjb21tYUJ1dHRvbjp7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuICAgICAgICBkb3RCdXR0b246e1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfVxuICAgIFxuICAgIH0sXG4gICAgLy8gTElGRS1DWUNMRSBDQUxMQkFDS1M6XG4gICAgb25Mb2FkICgpIHtcbiAgICAgICAgLy8gaWYodGhpcy5yZW1lbWJlck1lKXtcbiAgICAgICAgLy8gICAgIHRoaXMucmVtZW1iZXJNZS5pc0NoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgLy8gfSAgIFxuICAgICAgICB0aGlzLmFjdGl2ZUlucHV0RmllbGQgPSBudWxsOyBcbiAgICAgICAgdGhpcy5zZXR1cElucHV0Rm9jdXNMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5zZXR1cEtleWJvYXJkQnV0dG9uTGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuZGlzYWJsZURlZmF1bHRLZXlib2FyZCgpO1xuICAgICAgICB0aGlzLmxvYWRTYXZlZExvZ2luSW5mbygpO1xuICAgICAgICBpZiAoY2Muc3lzLmlzTW9iaWxlICYmIGNjLnN5cy5pc0Jyb3dzZXIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nID0gZnVuY3Rpb24oKSB7fTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBkaXNhYmxlRGVmYXVsdEtleWJvYXJkKCkge1xuICAgICAgICBpZiAoY2Muc3lzLmlzTW9iaWxlICYmIGNjLnN5cy5pc0Jyb3dzZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0LCB0ZXh0YXJlYScpO1xuICAgICAgICAgICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgICAgIGlucHV0LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7IC8vIERpc2FibGUgaW50ZXJhY3Rpb25zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBzZXR1cElucHV0Rm9jdXNMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGlmIChjYy5zeXMuaXNNb2JpbGUgJiYgY2Muc3lzLmlzQnJvd3Nlcikge1xuICAgICAgICAgICAgLy8gQXR0YWNoIGZvY3VzIGV2ZW50IGxpc3RlbmVycyB0byB1c2VybmFtZSBhbmQgcGFzc3dvcmQgaW5wdXQgZmllbGRzXG4gICAgICAgICAgICBpZiAodGhpcy51c2VyTmFtZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXNlck5hbWUubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIHRoaXMub25JbnB1dEZpZWxkQ2xpY2tlZCwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXNzd29yZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmQubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIHRoaXMub25JbnB1dEZpZWxkQ2xpY2tlZCwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuIFxuICAgIG9uSW5wdXRGaWVsZENsaWNrZWQoZXZlbnQpIHtcbiAgICAgICAgLy8gRm9jdXMgdGhlIGNvcnJlc3BvbmRpbmcgaW5wdXQgZmllbGQgdG8gdHJpZ2dlciB0aGUga2V5Ym9hcmRcbiAgICAgICAgLy8gY29uc29sZS5sb2coZXZlbnQpO1xuICAgICAgICBjb25zdCBpbnB1dE5vZGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmdldENvbXBvbmVudChjYy5FZGl0Qm94KTtcbiAgICAgICAgaWYgKGlucHV0Tm9kZSkge1xuICAgICAgICAgICAgLy8gaW5wdXROb2RlLmZvY3VzKClcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSW5wdXRGaWVsZCA9IGlucHV0Tm9kZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUtleWJvYXJkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21LZXlib2FyZC5hY3RpdmUgPSB0cnVlOyAvLyBTaG93IHRoZSBjdXN0b20ga2V5Ym9hcmQgaWYgbmVlZGVkXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlT25jZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSW5wdXRGaWVsZC5ibHVyKCk7IC8vIEJsdXIgdGhlIGlucHV0IGZpZWxkIGFmdGVyIHNob3dpbmcgdGhlIGN1c3RvbSBrZXlib2FyZFxuICAgICAgICAgICAgICAgIH0sIDAuMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc2V0dXBLZXlib2FyZEJ1dHRvbkxpc3RlbmVycygpIHtcbiAgICAgICAgY29uc3QgYWxsS2V5Ym9hcmRCdXR0b25zID0gdGhpcy5nZXRBbGxLZXlib2FyZEJ1dHRvbnMoKTtcbiAgICAgICAgYWxsS2V5Ym9hcmRCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgICAgICAgIGJ1dHRvbi5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIHRoaXMub25LZXlib2FyZEJ1dHRvbkNsaWNrZWQsIHRoaXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMuZGVsZXRlQnV0dG9uKSB7IC8vIEFkZCBsaXN0ZW5lciBmb3IgdGhlIGRlbGV0ZSBidXR0b25cbiAgICAgICAgICAgIHRoaXMuZGVsZXRlQnV0dG9uLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCwgdGhpcy5vbkRlbGV0ZUJ1dHRvbkNsaWNrZWQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGdldEFsbEtleWJvYXJkQnV0dG9ucygpIHtcbiAgICAgICAgbGV0IGJ1dHRvbnMgPSBbXTtcbiAgICAgICAgYnV0dG9ucyA9IGJ1dHRvbnMuY29uY2F0KHRoaXMuc21hbGxBbHBoYWJldC5jaGlsZHJlbik7XG4gICAgICAgIGJ1dHRvbnMgPSBidXR0b25zLmNvbmNhdCh0aGlzLmNhcGl0YWxBbHBoYWJldC5jaGlsZHJlbik7XG4gICAgICAgIGJ1dHRvbnMgPSBidXR0b25zLmNvbmNhdCh0aGlzLnN5bWJvbHNBbHBoYWJldC5jaGlsZHJlbik7XG4gICAgICAgIGJ1dHRvbnMgPSBidXR0b25zLmNvbmNhdCh0aGlzLnNwYWNlQnV0dG9uKTtcbiAgICAgICAgYnV0dG9ucyA9IGJ1dHRvbnMuY29uY2F0KHRoaXMuY29tbWFCdXR0b24pO1xuICAgICAgICBidXR0b25zID0gYnV0dG9ucy5jb25jYXQodGhpcy5kb3RCdXR0b24pO1xuICAgICAgICByZXR1cm4gYnV0dG9ucztcbiAgICB9LFxuXG4gICAgb25LZXlib2FyZEJ1dHRvbkNsaWNrZWQoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBjb25zdCBjdXN0b21FdmVudFZhbHVlID0gYnV0dG9uLl9jb21wb25lbnRzWzFdLmNsaWNrRXZlbnRzWzBdLmN1c3RvbUV2ZW50RGF0YTtcbiAgICAgICAgdGhpcy5hcHBlbmRUb0FjdGl2ZUlucHV0KGN1c3RvbUV2ZW50VmFsdWUpO1xuICAgIH0sXG5cbiAgICBhcHBlbmRUb0FjdGl2ZUlucHV0KHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUlucHV0RmllbGQpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSW5wdXRGaWVsZC5zdHJpbmcgKz0gdmFsdWU7IC8vIEFwcGVuZCB2YWx1ZSB0byB0aGUgYWN0aXZlIGlucHV0IGZpZWxkXG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uRGVsZXRlQnV0dG9uQ2xpY2tlZCgpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVGcm9tQWN0aXZlSW5wdXQoKTtcbiAgICB9LFxuICAgIFxuICAgIC8vbG9nb3V0QnV0dG9uIENsaWNrZWRcbiAgICBsb2d1dENsaWNrKCl7XG4gICAgICAgIGlmKHRoaXMubG9iYnlOb2RlLmFjdGl2ZSl7XG4gICAgICAgICAgICB0aGlzLmxvYmJ5Tm9kZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVtZW1iZXJNZUNoZWNrZWQ7XG4gICAgICAgIGlmIChjYy5zeXMuaXNCcm93c2VyKSB7XG4gICAgICAgICAgICByZW1lbWJlck1lQ2hlY2tlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyZW1lbWJlck1lQ2hlY2tlZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVtZW1iZXJNZUNoZWNrZWQgPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JlbWVtYmVyTWVDaGVja2VkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoIXJlbWVtYmVyTWVDaGVja2VkKXtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTYXZlZExvZ2luSW5mbygpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZUZyb21BY3RpdmVJbnB1dCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlSW5wdXRGaWVsZCAmJiB0aGlzLmFjdGl2ZUlucHV0RmllbGQuc3RyaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSW5wdXRGaWVsZC5zdHJpbmcgPSB0aGlzLmFjdGl2ZUlucHV0RmllbGQuc3RyaW5nLnNsaWNlKDAsIC0xKTsgLy8gUmVtb3ZlIGxhc3QgY2hhcmFjdGVyXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgb25Mb2dpbkNsaWNrICgpe1xuICAgICAgICB2YXIgYWRkcmVzcyA9IEsuU2VydmVyQWRkcmVzcy5pcEFkZHJlc3MgKyBLLlNlcnZlckFQSS5sb2dpbjtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdGhpcy51c2VyTmFtZS5zdHJpbmcsXG4gICAgICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZC5zdHJpbmdcbiAgICAgICAgfTtcbiAgICAgICAgaWYodGhpcy51c2VyTmFtZS5zdHJpbmcgPT0gXCJcIiB8fCB0aGlzLnBhc3N3b3JkLnN0cmluZyA9PSBcIlwiKXtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JMYWJsZS5zdHJpbmcgPSBcIlVzZXJuYW1lIG9yIFBhc3N3b3JkIGZpZWxkcyBhcmUgZW1wdHlcIlxuICAgICAgICAgICAgdGhpcy5sb2dpbkVycm9yTm9kZS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dpbkVycm9yTm9kZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yZW1lbWJlck1lLmlzQ2hlY2tlZCkge1xuICAgICAgICAgICAgdGhpcy5zYXZlTG9naW5JbmZvKHRoaXMudXNlck5hbWUuc3RyaW5nLCB0aGlzLnBhc3N3b3JkLnN0cmluZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyU2F2ZWRMb2dpbkluZm8oKTtcbiAgICAgICAgfVxuICAgICAgICBTZXJ2ZXJDb20uaHR0cFJlcXVlc3QoXCJQT1NUXCIsIGFkZHJlc3MsIGRhdGEsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5lcnJvcihcInJlcG9uc2Ugb24gbG9naW5cIiwgcmVzcG9uc2UudG9rZW4pO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnRva2VuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmFuZG9tTnVtYmVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApICsgMTtcbiAgICAgICAgICAgICAgICBpZiAoY2Muc3lzLmlzQnJvd3Nlcikge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgdXNlclRva2VuPSR7cmVzcG9uc2UudG9rZW59OyBwYXRoPS87YDtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gYGluZGV4ID0gJHtyYW5kb21OdW1iZXJ9YFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlclRva2VuJywgcmVzcG9uc2UudG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJpbmRleFwiLCByYW5kb21OdW1iZXIpOyBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ29va2llcy5zZXQoXCJpbmRleFwiLCByYW5kb21OdW1iZXIpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYmJ5Tm9kZS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgMTAwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIH0sXG5cbiAgICBzbWFsbEFscGhhYmV0QlV0dG9uQ2xpY2tlZDogZnVuY3Rpb24oKXtcbiAgICAgICAgaWYodGhpcy5jYXBpdGFsQWxwaGFiZXQuYWN0aXZlICl7XG4gICAgICAgICAgICB0aGlzLmNhcGl0YWxBbHBoYWJldC5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc21hbGxBbHBoYWJldC5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgaWYodGhpcy5zeW1ib2xzQWxwaGFiZXQuYWN0aXZlKXtcbiAgICAgICAgICAgICAgICB0aGlzLnN5bWJvbHNBbHBoYWJldC5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc21hbGxCdXR0b24uYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmNhcHNCdXR0b24uYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBpZih0aGlzLnN5bWJvbHNBbHBoYWJldC5hY3RpdmUpe1xuICAgICAgICAgICAgICAgIHRoaXMuc3ltYm9sc0FscGhhYmV0LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jYXBpdGFsQWxwaGFiZXQuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc21hbGxBbHBoYWJldC5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc21hbGxCdXR0b24uYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY2Fwc0J1dHRvbi5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgc3BlY2lhbFN5bWJvbENsaWNrZWQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKHRoaXMuY2FwaXRhbEFscGhhYmV0LmFjdGl2ZSB8fCB0aGlzLnNtYWxsQWxwaGFiZXQuYWN0aXZlKXtcbiAgICAgICAgICAgIHRoaXMuc21hbGxBbHBoYWJldC5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY2FwaXRhbEFscGhhYmV0LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5zeW1ib2xzQWxwaGFiZXQuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgdGhpcy5zeW1ib2xzQWxwaGFiZXQuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICBpZighdGhpcy5zbWFsbEFscGhhYmV0LmFjdGl2ZSl7XG4gICAgICAgICAgICAgICAgdGhpcy5zbWFsbEFscGhhYmV0LmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXBpdGFsQWxwaGFiZXQuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgY2xvc2VLZXlCb2FyZDogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5jdXN0b21LZXlib2FyZC5hY3RpdmUgPSBmYWxzZTtcbiAgICB9LFxuICAgIHNhdmVMb2dpbkluZm8gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICBpZiAoY2Muc3lzLmlzQnJvd3Nlcikge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JlbWVtYmVyZWRVc2VybmFtZScsIHVzZXJuYW1lKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyZW1lbWJlcmVkUGFzc3dvcmQnLCBwYXNzd29yZCk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncmVtZW1iZXJNZUNoZWNrZWQnLCAndHJ1ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyZW1lbWJlcmVkVXNlcm5hbWUnLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JlbWVtYmVyZWRQYXNzd29yZCcsIHBhc3N3b3JkKTtcbiAgICAgICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncmVtZW1iZXJNZUNoZWNrZWQnLCAndHJ1ZScpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGNsZWFyU2F2ZWRMb2dpbkluZm8gKCkge1xuICAgICAgICBpZiAoY2Muc3lzLmlzQnJvd3Nlcikge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3JlbWVtYmVyZWRVc2VybmFtZScpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3JlbWVtYmVyZWRQYXNzd29yZCcpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3JlbWVtYmVyTWVDaGVja2VkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3JlbWVtYmVyZWRVc2VybmFtZScpO1xuICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdyZW1lbWJlcmVkUGFzc3dvcmQnKTtcbiAgICAgICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncmVtZW1iZXJNZUNoZWNrZWQnKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBsb2FkU2F2ZWRMb2dpbkluZm8gKCkge1xuICAgICAgICBsZXQgdXNlcm5hbWUsIHBhc3N3b3JkLCByZW1lbWJlck1lQ2hlY2tlZDtcbiAgICAgICAgXG4gICAgICAgIGlmIChjYy5zeXMuaXNCcm93c2VyKSB7XG4gICAgICAgICAgICB1c2VybmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyZW1lbWJlcmVkVXNlcm5hbWUnKTtcbiAgICAgICAgICAgIHBhc3N3b3JkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JlbWVtYmVyZWRQYXNzd29yZCcpO1xuICAgICAgICAgICAgcmVtZW1iZXJNZUNoZWNrZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncmVtZW1iZXJNZUNoZWNrZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVzZXJuYW1lID0gY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyZW1lbWJlcmVkVXNlcm5hbWUnKTtcbiAgICAgICAgICAgIHBhc3N3b3JkID0gY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyZW1lbWJlcmVkUGFzc3dvcmQnKTtcbiAgICAgICAgICAgIHJlbWVtYmVyTWVDaGVja2VkID0gY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyZW1lbWJlck1lQ2hlY2tlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVzZXJuYW1lICYmIHBhc3N3b3JkKSB7XG4gICAgICAgICAgICB0aGlzLnVzZXJOYW1lLnN0cmluZyA9IHVzZXJuYW1lO1xuICAgICAgICAgICAgdGhpcy5wYXNzd29yZC5zdHJpbmcgPSBwYXNzd29yZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZW1lbWJlck1lQ2hlY2tlZCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICB0aGlzLnJlbWVtYmVyTWUuaXNDaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIHRoaXMucmVtZW1iZXJNZS5nZXRDaGlsZEJ5TmFtZShcImNoZWNrbWFya1wiKS5hY3RpdmUgPSB0cnVlXG4gICAgICAgIH1cbiAgICB9XG4gICBcbn0pOyJdfQ==